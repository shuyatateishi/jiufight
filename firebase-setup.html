<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥ Firebaseè¨­å®š - Jiufight Database Setup</title>
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”¥</text></svg>">
    
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ff0040 0%, #cc0033 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .status {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #2196f3;
        }
        .step {
            background: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .step h3 {
            color: #ff0040;
            margin-top: 0;
            font-size: 1.3rem;
        }
        .step-number {
            display: inline-block;
            background: #ff0040;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #c3e6cb;
            margin: 15px 0;
        }
        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .btn-test {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
        }
        .config-status {
            text-align: center;
            margin: 30px 0;
        }
        ol {
            padding-left: 0;
        }
        ol li {
            margin-bottom: 15px;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¥ Firebase ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š</h1>
            <p>Jiufightã®åˆ¥ç«¯æœ«é–“åŒæœŸã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã€Firebaseã®è¨­å®šãŒå¿…è¦ã§ã™</p>
        </div>

        <div class="status">
            <h3>ğŸ“Š ç¾åœ¨ã®çŠ¶æ…‹</h3>
            <div id="connection-status">ç¢ºèªä¸­...</div>
        </div>

        <div class="step">
            <h3><span class="step-number">1</span>Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ</h3>
            <ol>
                <li><a href="https://console.firebase.google.com/" target="_blank" class="btn">Firebase Console ã‚’é–‹ã</a></li>
                <li>ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                <li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ï¼ˆä¾‹ï¼š<code>jiufight</code>ï¼‰</li>
                <li>Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã¯ç„¡åŠ¹ã§OK</li>
                <li>ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>
        </div>

        <div class="step">
            <h3><span class="step-number">2</span>Realtime Database ã‚’æœ‰åŠ¹åŒ–</h3>
            <ol>
                <li>å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒRealtime Databaseã€ã‚’é¸æŠ</li>
                <li>ã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                <li>å ´æ‰€ã‚’ã€Œasia-southeast1 (ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«)ã€ã«è¨­å®š</li>
                <li>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§ã€Œãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹ã€ã‚’é¸æŠ</li>
                <li>ã€Œæœ‰åŠ¹ã«ã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>
        </div>

        <div class="step">
            <h3><span class="step-number">3</span>Web ã‚¢ãƒ—ãƒªã®è¨­å®š</h3>
            <ol>
                <li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆâš™ï¸ ã‚¢ã‚¤ã‚³ãƒ³ï¼‰â†’ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã€</li>
                <li>ã€Œãƒã‚¤ã‚¢ãƒ—ãƒªã€ã§ã€Œ&lt;/&gt;ã€ï¼ˆWebï¼‰ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                <li>ã‚¢ãƒ—ãƒªã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼š<code>jiufight-web</code></li>
                <li>ã€Œã‚¢ãƒ—ãƒªã‚’ç™»éŒ²ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                <li>è¡¨ç¤ºã•ã‚Œã‚‹è¨­å®šæƒ…å ±ã‚’ã‚³ãƒ”ãƒ¼</li>
            </ol>
        </div>

        <div class="step">
            <h3><span class="step-number">4</span>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°</h3>
            <p><code>firebase-config.js</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®éƒ¨åˆ†ã‚’å®Ÿéš›ã®å€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼š</p>
            
            <div class="code-block">
const firebaseConfig = {
    apiKey: "ã‚ãªãŸã®APIã‚­ãƒ¼ã‚’ã“ã“ã«",
    authDomain: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå.firebaseapp.com",
    databaseURL: "https://ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå",
    storageBucket: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå.appspot.com",
    messagingSenderId: "æ•°å­—",
    appId: "ã‚¢ãƒ—ãƒªID"
};
            </div>

            <div class="warning">
                <strong>âš ï¸ é‡è¦:</strong> <code>databaseURL</code> ã¯åœ°åŸŸã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§æ­£ç¢ºãªURLã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">5</span>å‹•ä½œç¢ºèª</h3>
            <div class="config-status">
                <button onclick="testConnection()" class="btn btn-test">ğŸ§ª æ¥ç¶šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
                <div id="test-results" style="margin-top: 20px;"></div>
            </div>
        </div>

        <div class="success" style="display: none;" id="success-message">
            <h4>âœ… è¨­å®šå®Œäº†ï¼</h4>
            <p>Firebaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ­£å¸¸ã«è¨­å®šã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã§å…¨ã¦ã®ç«¯æœ«ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p>
            <div style="margin-top: 15px;">
                <a href="cross-device-test.html" class="btn">ğŸŒ åˆ¥ç«¯æœ«é–“åŒæœŸãƒ†ã‚¹ãƒˆ</a>
                <a href="index.html" class="btn">ğŸ  ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
            </div>
        </div>

        <div class="step">
            <h3>ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h3>
            <ul>
                <li><strong>æ¥ç¶šã‚¨ãƒ©ãƒ¼:</strong> databaseURLãŒæ­£ã—ã„ã‹ç¢ºèª</li>
                <li><strong>æ¨©é™ã‚¨ãƒ©ãƒ¼:</strong> Realtime Databaseã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèª</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„:</strong> ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯</li>
            </ul>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="firebase-config.js"></script>
    
    <!-- Database Sync System -->
    <script src="database-sync.js"></script>

    <script>
        let statusInterval;

        function updateConnectionStatus() {
            const statusElement = document.getElementById('connection-status');
            
            if (typeof firebase === 'undefined') {
                statusElement.innerHTML = `
                    <div style="color: #dc3545;">âŒ Firebase SDK ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“</div>
                    <small>Firebaseè¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„</small>
                `;
                return;
            }

            if (!window.firebaseDB) {
                statusElement.innerHTML = `
                    <div style="color: #fd7e14;">âš ï¸ Firebaseè¨­å®šãŒä¸å®Œå…¨ã§ã™</div>
                    <small>firebase-config.jsã‚’ç¢ºèªã—ã¦ãã ã•ã„</small>
                `;
                return;
            }

            if (window.databaseSync && window.databaseSync.getSyncStatus) {
                const status = window.databaseSync.getSyncStatus();
                
                if (status.isOnline && status.hasDatabase) {
                    statusElement.innerHTML = `
                        <div style="color: #28a745; font-weight: bold;">âœ… Firebaseæ¥ç¶šæˆåŠŸ</div>
                        <small>ç«¯æœ«ID: ${status.deviceId}</small><br>
                        <small>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: æ¥ç¶šæ¸ˆã¿ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ: æœ‰åŠ¹</small>
                    `;
                    document.getElementById('success-message').style.display = 'block';
                } else {
                    statusElement.innerHTML = `
                        <div style="color: #fd7e14;">ğŸ”„ Firebaseæ¥ç¶šä¸­...</div>
                        <small>ç«¯æœ«ID: ${status.deviceId}</small><br>
                        <small>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³: ${status.isOnline ? 'ã¯ã„' : 'ã„ã„ãˆ'} | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: ${status.hasDatabase ? 'æ¥ç¶šæ¸ˆã¿' : 'æœªæ¥ç¶š'}</small>
                    `;
                }
            } else {
                statusElement.innerHTML = `
                    <div style="color: #dc3545;">âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŒæœŸã‚·ã‚¹ãƒ†ãƒ ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“</div>
                    <small>database-sync.jsã‚’ç¢ºèªã—ã¦ãã ã•ã„</small>
                `;
            }
        }

        function testConnection() {
            const resultsElement = document.getElementById('test-results');
            resultsElement.innerHTML = '<div style="color: #007bff;">ğŸ”„ æ¥ç¶šãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</div>';

            setTimeout(() => {
                if (window.databaseSync && window.databaseSync.getSyncStatus) {
                    const status = window.databaseSync.getSyncStatus();
                    
                    let result = '<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #dee2e6;">';
                    result += `<h5>ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ</h5>`;
                    result += `<p><strong>Firebase SDK:</strong> ${typeof firebase !== 'undefined' ? 'âœ… èª­ã¿è¾¼ã¿æ¸ˆã¿' : 'âŒ æœªèª­ã¿è¾¼ã¿'}</p>`;
                    result += `<p><strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š:</strong> ${status.hasDatabase ? 'âœ… æ¥ç¶šæ¸ˆã¿' : 'âŒ æœªæ¥ç¶š'}</p>`;
                    result += `<p><strong>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³çŠ¶æ…‹:</strong> ${status.isOnline ? 'âœ… ã‚ªãƒ³ãƒ©ã‚¤ãƒ³' : 'âŒ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³'}</p>`;
                    result += `<p><strong>åŒæœŸã‚·ã‚¹ãƒ†ãƒ :</strong> ${window.databaseSync ? 'âœ… åˆ©ç”¨å¯èƒ½' : 'âŒ åˆ©ç”¨ä¸å¯'}</p>`;
                    result += `<p><strong>ç«¯æœ«ID:</strong> ${status.deviceId}</p>`;
                    
                    if (status.isOnline && status.hasDatabase) {
                        result += '<div style="color: #28a745; font-weight: bold; margin-top: 15px;">ğŸ‰ å…¨ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼</div>';
                        window.databaseSync.forceSync();
                        result += '<p><small>å¼·åˆ¶åŒæœŸã‚’å®Ÿè¡Œã—ã¾ã—ãŸ</small></p>';
                    } else {
                        result += '<div style="color: #dc3545; font-weight: bold; margin-top: 15px;">âš ï¸ è¨­å®šã‚’è¦‹ç›´ã—ã¦ãã ã•ã„</div>';
                    }
                    
                    result += '</div>';
                    resultsElement.innerHTML = result;
                } else {
                    resultsElement.innerHTML = '<div style="color: #dc3545;">âŒ ãƒ†ã‚¹ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚·ã‚¹ãƒ†ãƒ ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚</div>';
                }
            }, 2000);
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            updateConnectionStatus();
            statusInterval = setInterval(updateConnectionStatus, 3000);
        });

        // ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        window.addEventListener('beforeunload', () => {
            if (statusInterval) {
                clearInterval(statusInterval);
            }
        });
    </script>
</body>
</html>